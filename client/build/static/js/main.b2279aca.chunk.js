(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{96:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(0),r=n.n(c),i=n(13),s=n.n(i),o=n(31),l=n(126),d=n(129),j=n(131),u=n(98),b=Object(l.a)({container:{display:"flex"},icon:{display:"flex",alignItems:"center",paddingRight:8}}),p=function(e){var t=e.icon,n=e.title,c=b();return Object(a.jsx)(d.a,{position:"sticky",children:Object(a.jsx)(j.a,{variant:"dense",children:Object(a.jsxs)("div",{className:c.container,children:[Object(a.jsx)("span",{className:c.icon,children:t}),Object(a.jsx)(u.a,{variant:"h6",children:n})]})})})},O=n(40),f=n(69),m=n(22),x=n.n(m),h=n(53),v=Object(O.b)({name:"carList",initialState:{cars:[],loading:!1},reducers:{fetchCars:function(e){e.loading=!0},receiveCars:function(e,t){e.cars=t.payload,e.loading=!1},updateCar:function(e,t){var n=e.cars.findIndex((function(e){return e.id===t.payload.id}));n>=0&&(e.cars[n]=t.payload)}}}),g=v.reducer,y=v.actions,C=n(66),k=function(){var e=Object(C.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/cars",{mode:"no-cors"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.cars);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),w=x.a.mark(N);function N(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:return e=t.sent,t.next=5,Object(h.a)(y.receiveCars(e));case 5:case"end":return t.stop()}}),w)}var S=x.a.mark(I);function I(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(y.fetchCars.type,N);case 2:case"end":return e.stop()}}),S)}var D=Object(f.a)(),z=Object(O.a)({reducer:g,devTools:!0,middleware:function(e){return e().concat(D)}});D.run(I);var E=z,W=n(68),B=n.n(W),L=n(21),T=Object(l.a)((function(e){return{"@global":{body:Object(L.a)(Object(L.a)({},e.typography.body1),{},{margin:0,background:e.palette.background.default})}}})),J=function(e){var t=e.children;return T(),Object(a.jsx)("div",{children:t})},M=Object(l.a)((function(e){return{container:{display:"flex",padding:e.spacing(1)}}})),F=function(e){var t=e.children,n=M();return Object(a.jsx)("div",{className:n.container,children:t})},K=n(141),P=n(46),R=function(e){return e},U=(Object(P.a)(R,(function(e){return e.loading})),Object(P.a)(R,(function(e){return e.cars}))),q=n(32),A=n(136),G=n(137),H=n(138),Q=n(139),V=n(140),X=n(135),Y=n(67),Z=n.n(Y),$=function(e){if(!e)return new Date;var t=e.split("/"),n=Object(q.a)(t,3),a=n[0],c=n[1],r=n[2];return a&&c&&r?Z()("".concat(a,"-").concat(r,"-").concat(c)).toDate():new Date(e)},_=function(e){return e.toISOString().split("T")[0]},ee=n(144),te=n(132),ne=n(133),ae=n(142),ce=n(134),re=Object(l.a)((function(e){return{field:{"&:not(:first-child)":{marginLeft:e.spacing(1)}}}})),ie=function(e){var t=e.car,n=e.open,r=e.onConfirm,i=re(),s=Object(c.useState)(""),o=Object(q.a)(s,2),l=o[0],d=o[1],j=Object(c.useState)($(t.estimatedate)),u=Object(q.a)(j,2),b=u[0],p=u[1],O=_(b);return Object(a.jsxs)(ee.a,{open:n,children:[Object(a.jsx)(te.a,{children:"Put into maintenance"}),Object(a.jsxs)(ne.a,{children:[Object(a.jsx)(ae.a,{className:i.field,size:"small",label:"Client name",variant:"outlined",value:l,onChange:function(e){d(e.target.value)}}),Object(a.jsx)(ae.a,{className:i.field,size:"small",label:"Estimated date",type:"date",value:O,onChange:function(e){var t=$(e.target.value);p(t)},variant:"outlined"})]}),Object(a.jsx)(ce.a,{children:Object(a.jsx)(X.a,{onClick:function(){r(t.id,l,b)},disabled:!l,children:"Save"})})]})},se=Object(l.a)((function(e){return{overlay:{width:"100%",height:"100%",position:"absolute",opacity:"0.3",zIndex:1,pointerEvents:"none",backgroundColor:function(e){return e.estimatedate?"#a7a8af":"transparent"}},root:{position:"relative",minWidth:280,maxWidth:280,display:"flex",flexDirection:"column",justifyContent:"space-around",marginBottom:e.spacing(2),marginLeft:e.spacing(3)},media:{display:"flex",justifyContent:"center",alignItems:"center",height:140}}})),oe=function(e){var t,n=Object(o.b)(),r=se({estimatedate:e.estimatedate}),i=Object(c.useState)(!1),s=Object(q.a)(i,2),l=s[0],d=s[1],j=function(){if(!e.estimatedate)return d(!0);var t=Object(L.a)(Object(L.a)({},e),{},{clientName:void 0,estimatedate:void 0});n(y.updateCar(t))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(A.a,{className:r.root,children:[Object(a.jsx)("div",{className:r.overlay}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(H.a,{className:r.media,image:e.image}),Object(a.jsxs)(Q.a,{children:[Object(a.jsxs)(u.a,{gutterBottom:!0,variant:"h6",children:[e.make," ",e.model]}),Object(a.jsxs)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:["ID: ",e.id]}),Object(a.jsxs)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:["KM: ",(t=e.km,t?t.toLocaleString():"Unknown")]}),Object(a.jsx)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:e.clientName&&"Client: ".concat(e.clientName)}),Object(a.jsxs)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:["Description: ",e.description]}),Object(a.jsx)(u.a,{variant:"body2",color:"textSecondary",component:"p",children:e.estimatedate&&"Estimated date: ".concat(e.estimatedate)})]})]}),Object(a.jsxs)(V.a,{children:[!e.estimatedate&&Object(a.jsx)(X.a,{size:"small",color:"primary",fullWidth:!0,onClick:j,children:"Change status"}),e.estimatedate&&Object(a.jsx)(X.a,{size:"small",color:"primary",fullWidth:!0,onClick:j,children:"It's done"})]})]}),Object(a.jsx)(ie,{open:l,onConfirm:function(t,a,c){var r=Object(L.a)(Object(L.a)({},e),{},{clientName:a,estimatedate:_(c)});n(y.updateCar(r)),d(!1)},car:e})]})},le=Object(l.a)((function(e){return{title:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},list:{display:"flex",flexWrap:"wrap"}}})),de=function(){var e=le(),t=Object(o.b)(),n=Object(o.c)(U);return Object(c.useEffect)((function(){t(y.fetchCars())}),[t]),Object(a.jsxs)(K.a,{children:[Object(a.jsxs)(u.a,{variant:"h5",className:e.title,children:["Car list (",n.length,")"]}),Object(a.jsx)("div",{className:e.list,children:n.map((function(e){return Object(a.jsx)(oe,Object(L.a)({},e),e.id)}))})]})},je=function(){return Object(a.jsx)(o.a,{store:E,children:Object(a.jsxs)(J,{children:[Object(a.jsx)(p,{icon:Object(a.jsx)(B.a,{}),title:"Cars"}),Object(a.jsx)(F,{children:Object(a.jsx)(de,{})})]})})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(je,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.b2279aca.chunk.js.map